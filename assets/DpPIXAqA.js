import{g as E,k as H,m as d,C as I,l as L,c as r,a as t,q as l,p as _,v as k,D as w,E as M,F as m,G as f,t as n,d as S,o as i,B as c}from"./DDPV8dZD.js";import{u as W}from"./FpedhT-1.js";import{_ as K}from"./DlAUqK2U.js";const U={class:"min-h-screen pb-20"},q={class:"bg-gradient-to-b from-[#2d5a5a] to-[#3d7a7a] pt-6 pb-6 px-4"},G={class:"flex items-center gap-3"},O={class:"px-4 py-4"},P={class:"bg-white rounded-2xl shadow-card p-4 mb-4 animate-fade-in"},$={class:"flex gap-3"},Q={class:"flex-1"},X=["value"],Z={class:"flex-1"},tt=["value"],et={key:0,class:"text-center mb-4"},st={class:"text-gray-600 font-medium"},at={class:"grid grid-cols-4 gap-2 mb-2"},nt={class:"bg-green-50 rounded-xl p-3 text-center animate-slide-up",style:{"animation-delay":"0.1s"}},lt={class:"text-2xl font-bold text-green-600"},ot={class:"bg-red-50 rounded-xl p-3 text-center animate-slide-up",style:{"animation-delay":"0.15s"}},rt={class:"text-2xl font-bold text-red-600"},it={class:"bg-blue-50 rounded-xl p-3 text-center animate-slide-up",style:{"animation-delay":"0.2s"}},dt={class:"text-2xl font-bold text-blue-600"},ut={class:"bg-pink-50 rounded-xl p-3 text-center animate-slide-up",style:{"animation-delay":"0.25s"}},xt={class:"text-2xl font-bold text-pink-600"},ct={class:"grid grid-cols-3 gap-2 mb-4"},pt={class:"bg-orange-50 rounded-xl p-3 text-center animate-slide-up",style:{"animation-delay":"0.3s"}},gt={class:"text-2xl font-bold text-orange-600"},bt={class:"bg-yellow-50 rounded-xl p-3 text-center animate-slide-up",style:{"animation-delay":"0.35s"}},_t={class:"text-2xl font-bold text-yellow-600"},yt={class:"bg-gray-50 rounded-xl p-3 text-center animate-slide-up",style:{"animation-delay":"0.4s"}},vt={class:"text-2xl font-bold text-gray-600"},mt={key:1,class:"bg-white rounded-2xl shadow-card p-4 mb-4 animate-slide-up",style:{"animation-delay":"0.45s"}},ft={class:"grid grid-cols-2 gap-4"},ht={class:"text-center"},kt={class:"text-xl font-bold text-red-600"},wt={class:"text-center"},Mt={class:"text-xl font-bold text-orange-600"},St={class:"bg-white rounded-2xl shadow-card overflow-hidden animate-slide-up",style:{"animation-delay":"0.5s"}},Dt={key:0,class:"p-8 flex justify-center"},Ct={key:1,class:"p-8 text-center"},Tt={key:2,class:"divide-y divide-gray-100"},Bt={class:"flex items-start justify-between"},jt={class:"flex items-start gap-3"},zt={class:"font-semibold text-gray-800"},At={class:"text-xs text-gray-500 mb-1"},Ft={class:"flex items-center gap-3 mt-1"},Rt={class:"flex items-center gap-1 text-sm"},Vt={class:"text-gray-600"},Jt={class:"flex items-center gap-1 text-sm"},Nt={class:"text-gray-600"},Yt={key:0,class:"text-xs text-gray-500 mt-1 italic"},Et={key:0,class:"mt-2 ml-15"},Ht={class:"text-xs bg-red-100 text-red-600 px-2 py-1 rounded-full"},It=E({__name:"riwayat",setup(Lt){const D=W(),C=H(),y=d(!0),p=d([]),u=d(new Date().getMonth()+1),x=d(new Date().getFullYear()),g=d(null),o=d({total_hadir:0,total_terlambat:0,total_alpha:0,total_izin:0,total_sakit:0,total_cuti:0,total_libur:0,total_menit_telat:0,total_menit_pulang_awal:0}),T=[{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}],v=new Date().getFullYear(),B=[v,v-1,v-2],b=s=>s==="Saturday"||s==="Sunday",j=s=>new Date(s).getDate(),z=s=>({Monday:"Sen",Tuesday:"Sel",Wednesday:"Rab",Thursday:"Kam",Friday:"Jum",Saturday:"Sab",Sunday:"Min"})[s]||s.substring(0,3),A=s=>({Monday:"Senin",Tuesday:"Selasa",Wednesday:"Rabu",Thursday:"Kamis",Friday:"Jumat",Saturday:"Sabtu",Sunday:"Minggu"})[s]||s,F=s=>{const e={day:"numeric",month:"long",year:"numeric"};return new Date(s).toLocaleDateString("id-ID",e)},R=s=>b(s.hari)?"bg-gray-100":s.status==="hadir"?"bg-green-100":s.status==="alpha"?"bg-red-100":s.status==="izin"?"bg-blue-100":s.status==="sakit"?"bg-pink-100":s.status==="cuti"?"bg-orange-100":"bg-primary-50",V=s=>b(s.hari)?"text-gray-500":s.status==="hadir"?"text-green-600":s.status==="alpha"?"text-red-600":s.status==="izin"?"text-blue-600":s.status==="sakit"?"text-pink-600":s.status==="cuti"?"text-orange-600":"text-primary-600",J=s=>b(s.hari)?"text-gray-400":s.status==="hadir"?"text-green-500":s.status==="alpha"?"text-red-500":s.status==="izin"?"text-blue-500":s.status==="sakit"?"text-pink-500":s.status==="cuti"?"text-orange-500":"text-primary-500",N=s=>{switch(s){case"hadir":return"badge badge-success";case"izin":return"badge badge-info";case"sakit":return"badge bg-pink-100 text-pink-700";case"cuti":return"badge bg-orange-100 text-orange-700";case"alpha":return"badge badge-danger";case"libur":return"badge bg-gray-100 text-gray-700";default:return"badge bg-gray-100 text-gray-500"}},h=async()=>{y.value=!0;try{const s=await D.getRekapAbsensi({bulan:u.value,tahun:x.value});s.success&&s.data&&(g.value=s.data.periode,o.value=s.data.summary,p.value=s.data.rekap)}catch(s){console.error("Error fetching rekap:",s),p.value=[]}finally{y.value=!1}};return I([u,x],()=>{h()}),L(()=>{h()}),(s,e)=>(i(),r("div",U,[t("div",q,[t("div",G,[t("button",{onClick:e[0]||(e[0]=a=>l(C).back()),class:"text-white"},[...e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e[4]||(e[4]=t("h1",{class:"text-xl font-bold text-white"},"Riwayat Absensi",-1))])]),t("div",O,[t("div",P,[t("div",$,[t("div",Q,[e[5]||(e[5]=t("label",{class:"text-xs text-gray-500 mb-1 block"},"Bulan",-1)),k(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>M(u)?u.value=a:null),class:"input-field text-sm"},[(i(),r(m,null,f(T,a=>t("option",{key:a.value,value:a.value},n(a.label),9,X)),64))],512),[[w,l(u)]])]),t("div",Z,[e[6]||(e[6]=t("label",{class:"text-xs text-gray-500 mb-1 block"},"Tahun",-1)),k(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>M(x)?x.value=a:null),class:"input-field text-sm"},[(i(),r(m,null,f(B,a=>t("option",{key:a,value:a},n(a),9,tt)),64))],512),[[w,l(x)]])])])]),l(g)?(i(),r("div",et,[t("p",st,n(l(g).bulan_nama)+" "+n(l(g).tahun),1)])):_("",!0),t("div",at,[t("div",nt,[t("p",lt,n(l(o).total_hadir),1),e[7]||(e[7]=t("p",{class:"text-xs text-green-700"},"Hadir",-1))]),t("div",ot,[t("p",rt,n(l(o).total_alpha),1),e[8]||(e[8]=t("p",{class:"text-xs text-red-700"},"Alpha",-1))]),t("div",it,[t("p",dt,n(l(o).total_izin),1),e[9]||(e[9]=t("p",{class:"text-xs text-blue-700"},"Izin",-1))]),t("div",ut,[t("p",xt,n(l(o).total_sakit),1),e[10]||(e[10]=t("p",{class:"text-xs text-pink-700"},"Sakit",-1))])]),t("div",ct,[t("div",pt,[t("p",gt,n(l(o).total_cuti),1),e[11]||(e[11]=t("p",{class:"text-xs text-orange-700"},"Cuti",-1))]),t("div",bt,[t("p",_t,n(l(o).total_terlambat),1),e[12]||(e[12]=t("p",{class:"text-xs text-yellow-700"},"Terlambat",-1))]),t("div",yt,[t("p",vt,n(l(o).total_libur),1),e[13]||(e[13]=t("p",{class:"text-xs text-gray-700"},"Libur",-1))])]),l(o).total_menit_telat>0||l(o).total_menit_pulang_awal>0?(i(),r("div",mt,[t("div",ft,[t("div",ht,[e[15]||(e[15]=t("p",{class:"text-sm text-gray-500"},"Total Menit Telat",-1)),t("p",kt,[S(n(l(o).total_menit_telat)+" ",1),e[14]||(e[14]=t("span",{class:"text-sm font-normal"},"menit",-1))])]),t("div",wt,[e[17]||(e[17]=t("p",{class:"text-sm text-gray-500"},"Total Pulang Awal",-1)),t("p",Mt,[S(n(l(o).total_menit_pulang_awal)+" ",1),e[16]||(e[16]=t("span",{class:"text-sm font-normal"},"menit",-1))])])])])):_("",!0),t("div",St,[l(y)?(i(),r("div",Dt,[...e[18]||(e[18]=[t("div",{class:"spinner border-primary-500 border-t-transparent"},null,-1)])])):l(p).length===0?(i(),r("div",Ct,[...e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16 text-gray-300 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),t("p",{class:"text-gray-500"},"Tidak ada data rekap",-1)])])):(i(),r("div",Tt,[(i(!0),r(m,null,f(l(p),(a,Y)=>(i(),r("div",{key:Y,class:c(["p-4 hover:bg-gray-50 transition-colors",{"bg-gray-50/50":b(a.hari)}])},[t("div",Bt,[t("div",jt,[t("div",{class:c(["w-12 h-12 rounded-xl flex flex-col items-center justify-center flex-shrink-0",R(a)])},[t("span",{class:c(["text-lg font-bold",V(a)])},n(j(a.tanggal)),3),t("span",{class:c(["text-[10px] uppercase",J(a)])},n(z(a.hari)),3)],2),t("div",null,[t("p",zt,n(A(a.hari)),1),t("p",At,n(F(a.tanggal)),1),t("div",Ft,[t("div",Rt,[e[20]||(e[20]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14"})],-1)),t("span",Vt,n(a.jam_masuk),1)]),t("div",Jt,[e[21]||(e[21]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7"})],-1)),t("span",Nt,n(a.jam_pulang),1)])]),a.keterangan?(i(),r("p",Yt,n(a.keterangan),1)):_("",!0)])]),t("span",{class:c(N(a.status))},n(a.status_label),3)]),a.telat_menit?(i(),r("div",Et,[t("span",Ht," Telat "+n(a.telat_menit)+" menit ",1)])):_("",!0)],2))),128))]))])])]))}}),qt=K(It,[["__scopeId","data-v-4f0fc619"]]);export{qt as default};
