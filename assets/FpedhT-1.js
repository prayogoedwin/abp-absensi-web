import{j as i}from"./DDPV8dZD.js";const n="https://abp.komunitasrehab.id/api",w=()=>{const a=i(),s=(t=!0)=>{const e={"Content-Type":"application/json",Accept:"application/json"};return t&&a.token&&(e.Authorization=`Bearer ${a.token}`),e},o=async t=>{const e=await t.json();if(!t.ok)throw new Error(e.message||"Terjadi kesalahan");return e};return{login:async(t,e)=>{const r=await fetch(`${n}/login`,{method:"POST",headers:s(!1),body:JSON.stringify({username:t,password:e})});return o(r)},getProfile:async()=>{const t=await fetch(`${n}/profile`,{method:"GET",headers:s()});return o(t)},getLastAbsensi:async()=>{const t=await fetch(`${n}/absensi/last`,{method:"GET",headers:s()});return o(t)},clockIn:async t=>{const e=await fetch(`${n}/absensi/clock-in`,{method:"POST",headers:s(),body:JSON.stringify(t)});return o(e)},clockOut:async t=>{const e=await fetch(`${n}/absensi/clock-out`,{method:"POST",headers:s(),body:JSON.stringify(t)});return o(e)},submitStatusLain:async t=>{const e=await fetch(`${n}/absensi/status-lain`,{method:"POST",headers:s(),body:JSON.stringify(t)});return o(e)},updatePassword:async t=>{const e=await fetch(`${n}/password/update`,{method:"POST",headers:s(),body:JSON.stringify(t)});return o(e)},getRekapAbsensi:async t=>{const e=new URLSearchParams;t?.bulan&&e.append("bulan",t.bulan.toString()),t?.tahun&&e.append("tahun",t.tahun.toString());const r=`${n}/absensi/rekap${e.toString()?"?"+e.toString():""}`,c=await fetch(r,{method:"GET",headers:s()});return o(c)},logout:async()=>{try{await fetch(`${n}/logout`,{method:"POST",headers:s()})}catch{}a.logout()}}};export{w as u};
